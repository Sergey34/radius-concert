<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Радиус Концерт</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">


    <link href="/css/open-iconic-bootstrap.min.css" rel="stylesheet">
    <link href="/css/animate.css" rel="stylesheet">

    <link href="/css/owl.carousel.min.css" rel="stylesheet">
    <link href="/css/owl.theme.default.min.css" rel="stylesheet">
    <link href="/css/magnific-popup.css" rel="stylesheet">

    <link href="/css/aos.css" rel="stylesheet">

    <link href="/css/ionicons.min.css" rel="stylesheet">

    <link href="/css/bootstrap-datepicker.css" rel="stylesheet">
    <link href="/css/jquery.timepicker.css" rel="stylesheet">


    <link href="/css/flaticon.css" rel="stylesheet">
    <link href="/css/icomoon.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" rel="stylesheet" type="text/css"/>
</head>
<body>

<div th:insert="fragments/navbar.html"></div>

<!-- END nav -->
<div class="hero">
    <section class="home-slider owl-carousel">
        <div class="slider-item" style="background-image:url(images/bg_1.jpg);">
            <div class="overlay"></div>
            <div class="container">
                <div class="row no-gutters slider-text align-items-center justify-content-end">
                    <div class="col-md-6 ftco-animate">
                        <div class="text">
                            <h2>Интересно провести выходные</h2>
                            <h1 class="mb-3">Потрачу 2 дня ради концерта.</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="slider-item" style="background-image:url(images/bg_2.jpg);">
            <div class="overlay"></div>
            <div class="container">
                <div class="row no-gutters slider-text align-items-center justify-content-end">
                    <div class="col-md-6 ftco-animate">
                        <div class="text">
                            <h2>За любимой группой</h2>
                            <h1 class="mb-3">Проеду 1000Км за любимой группой.</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<section class="ftco-booking ftco-section ftco-no-pt ftco-no-pb">
    <div class="container">
        <div class="row no-gutters">
            <div class="col-lg-12">
                <form action="#" class="booking-form aside-stretch">
                    <div class="row">
                        <div class="col-md d-flex py-md-4">
                            <div class="form-group align-self-stretch d-flex align-items-end">
                                <div class="wrap align-self-stretch py-3 px-4">
                                    <label for="city" id="l_city">Где вы?</label>
                                    <input class="form-control" id="city" placeholder="Воскресенское" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="col-md d-flex py-md-4">
                            <div class="form-group align-self-stretch d-flex align-items-end">
                                <div class="wrap align-self-stretch py-3 px-4">
                                    <label for="genre" id="l_categoty">Жанр</label>
                                    <select class="form-control" id="genre" name="">
                                        <option value="all">Все</option>
                                        <option value="rock">Рок</option>
                                        <option value="govno">Попса - говно</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md d-flex py-md-4">
                            <div class="form-group align-self-stretch d-flex align-items-end">
                                <div class="wrap align-self-stretch py-3 px-4">
                                    <label for="distance" id="l_distance">Расстояние</label>
                                    <div class="form-field">
                                        <div class="select-wrap">
                                            <div class="icon"><span class="ion-ios-arrow-down"></span></div>
                                            <input class="form-control" id="distance" placeholder="1000" type="number">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md d-flex py-md-4">
                            <div class="form-group align-self-stretch d-flex align-items-end">
                                <div class="wrap align-self-stretch py-3 px-6">
                                    <label for="when" id="l_when">Когда?</label>
                                    <input class="form-control" id="when" name="daterange" type="text"
                                           value="01/01/2018 - 01/15/2018"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-md d-flex">
                            <div class="form-group d-flex align-self-stretch">
                                <a class="btn btn-primary py-5 py-md-3 px-4 align-self-stretch d-block" href="#"
                                   id="search"
                                   onclick="changeLink();"><span>Найти подходящие <small>приятного отдыха</small></span></a>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>


<section class="ftco-section">
    <div class="container">
        <div class="row justify-content-center mb-5 pb-3">
            <div class="col-md-7 heading-section text-center ftco-animate">
                <span class="subheading">Добро пожаловать на РадиусКонцерт</span>
                <h2 class="mb-4">Лучший сервис для планирование поездок на концерты</h2>
            </div>
        </div>
        <div class="row d-flex">
            <div class="col-md pr-md-1 d-flex align-self-stretch ftco-animate">
                <div class="media block-6 services py-4 d-block text-center">
                    <div class="d-flex justify-content-center">
                        <div class="icon d-flex align-items-center justify-content-center">
                            <span class="flaticon-reception-bell"></span>
                        </div>
                    </div>
                    <div class="media-body">
                        <h3 class="heading mb-3">Уведомления о новинках</h3>
                    </div>
                </div>
            </div>
            <div class="col-md px-md-1 d-flex align-self-stretch ftco-animate">
                <div class="media block-6 services active py-4 d-block text-center">
                    <div class="d-flex justify-content-center">
                        <div class="icon d-flex align-items-center justify-content-center">
                            <span class="flaticon-serving-dish"></span>
                        </div>
                    </div>
                    <div class="media-body">
                        <h3 class="heading mb-3">Планировнаие _ поездок</h3>
                    </div>
                </div>
            </div>
            <div class="col-md px-md-1 d-flex align-sel Searchf-stretch ftco-animate">
                <div class="media block-6 services py-4 d-block text-center">
                    <div class="d-flex justify-content-center">
                        <div class="icon d-flex align-items-center justify-content-center">
                            <span class="flaticon-car"></span>
                        </div>
                    </div>
                    <div class="media-body">
                        <h3 class="heading mb-3">Подбор маршрута</h3>
                    </div>
                </div>
            </div>
            <div class="col-md px-md-1 d-flex align-self-stretch ftco-animate">
                <div class="media block-6 services py-4 d-block text-center">
                    <div class="d-flex justify-content-center">
                        <div class="icon d-flex align-items-center justify-content-center">
                            <span class="flaticon-spa"></span>
                        </div>
                    </div>
                    <div class="media-body">
                        <h3 class="heading mb-3">Отзывы</h3>
                    </div>
                </div>
            </div>
            <div class="col-md pl-md-1 d-flex align-self-stretch ftco-animate">
                <div class="media block-6 services py-4 d-block text-center">
                    <div class="d-flex justify-content-center">
                        <div class="icon d-flex align-items-center justify-content-center">
                            <span class="ion-ios-bed"></span>
                        </div>
                    </div>
                    <div class="media-body">
                        <h3 class="heading mb-3">Рекомендация гостинниц</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div th:insert="fragments/events.html"/>

<section class="ftco-section">
    <div class="container">
        <div class="row justify-content-center mb-5 pb-3">
            <div class="col-md-7 heading-section text-center ftco-animate">
                <span class="subheading">Читать блог</span>
                <h2>Недавние публикации</h2>
            </div>
        </div>
        <div class="row d-flex">
            <div class="col-md-4 d-flex ftco-animate">
                <div class="blog-entry align-self-stretch">
                    <a class="block-20 rounded" href="blog-single.html"
                       style="background-image: url('images/image_1.jpg');">
                    </a>
                    <div class="text mt-3 text-center">
                        <div class="meta mb-2">
                            <div><a href="#">Oct. 30, 2019</a></div>
                            <div><a href="#">Admin</a></div>
                            <div><a class="meta-chat" href="#"><span class="icon-chat"></span> 3</a></div>
                        </div>
                        <h3 class="heading"><a href="#">Even the all-powerful Pointing has no control about the blind
                            texts</a></h3>
                    </div>
                </div>
            </div>
            <div class="col-md-4 d-flex ftco-animate">
                <div class="blog-entry align-self-stretch">
                    <a class="block-20 rounded" href="blog-single.html"
                       style="background-image: url('images/image_2.jpg');">
                    </a>
                    <div class="text mt-3 text-center">
                        <div class="meta mb-2">
                            <div><a href="#">Oct. 30, 2019</a></div>
                            <div><a href="#">Admin</a></div>
                            <div><a class="meta-chat" href="#"><span class="icon-chat"></span> 3</a></div>
                        </div>
                        <h3 class="heading"><a href="#">Even the all-powerful Pointing has no control about the blind
                            texts</a></h3>
                    </div>
                </div>
            </div>
            <div class="col-md-4 d-flex ftco-animate">
                <div class="blog-entry align-self-stretch">
                    <a class="block-20 rounded" href="blog-single.html"
                       style="background-image: url('images/image_3.jpg');">
                    </a>
                    <div class="text mt-3 text-center">
                        <div class="meta mb-2">
                            <div><a href="#">Oct. 30, 2019</a></div>
                            <div><a href="#">Admin</a></div>
                            <div><a class="meta-chat" href="#"><span class="icon-chat"></span> 3</a></div>
                        </div>
                        <h3 class="heading"><a href="#">Even the all-powerful Pointing has no control about the blind
                            texts</a></h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div th:insert="fragments/footer.html"/>


<!-- loader -->
<div th:insert="fragments/loader.html"/>


<script src="/js/jquery.min.js"></script>
<script src="/js/jquery-migrate-3.0.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.easing.1.3.js"></script>
<script src="/js/jquery.waypoints.min.js"></script>
<script src="/js/jquery.stellar.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/aos.js"></script>
<script src="/js/jquery.animateNumber.min.js"></script>
<script src="/js/bootstrap-datepicker.js"></script>
<script src="/js/scrollax.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/fillEvents.js"></script>
<script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js" type="text/javascript"></script>


<script>
    $.get(`/api/events?count=6`, function (data) {
        events_stored = data;
        fillEvents(0, data.length);
    });
</script>
<script>
    function changeLink() {
        const currentCity = $('#city').val();
        const distance = $('#distance').val();
        const genre = $('#genre').val();
        const [startStr, endStr] = $('input[name="daterange"]').val().split(' - ');
        const start = moment(startStr, 'DD/MM/YY').format("DDMMYY");
        const end = moment(endStr, 'DD/MM/YY').format("DDMMYY");
        let valid = true;
        if (currentCity === null || currentCity === undefined || currentCity.length < 2) {
            $('#l_city').addClass("text-danger");
            valid = false
        } else {
            $('#l_city').removeClass("text-danger");
        }
        if (distance === null || distance === undefined || distance.length < 2) {
            $('#l_distance').addClass("text-danger");
            valid = false
        } else {
            $('#l_distance').removeClass("text-danger");
        }
        if (!valid) {
            return valid;
        }
        document.getElementById('search').href = `/events/${currentCity}/${distance}/KILOMETERS/${genre}/${start}/${end}`;
    }
</script>

<script>
    $(function () {
        let startDate = new Date();
        let endDate = new Date();
        let minDate = new Date();
        minDate.setDate(minDate.getDate() - 1);
        endDate.setMonth(endDate.getMonth() + 1);
        $('input[name="daterange"]').daterangepicker({
            opens: 'left',
            minDate: startDate,
            startDate: startDate,
            endDate: endDate,
            showDropdowns: true,
            locale: {
                cancelLabel: ' Отмена ',
                applyLabel: ' Применить ',
                format: 'DD/MM/YY',
                separator: ' - ',
                monthNames: [
                    'Январь',
                    'Февраль',
                    'Март',
                    'Апрель',
                    'Май',
                    'Июнь',
                    'Июль',
                    'Август',
                    'Сентябрь',
                    'Октябрь',
                    'Ноябрь',
                    'Декабрь'
                ],
            }
        }, function (start, end, label) {
            console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
        });
    });
</script>

</body>
</html>