<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <title>Радиус Концерт - Статьи</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">

    <link href="/css/open-iconic-bootstrap.min.css" rel="stylesheet">
    <link href="/css/animate.css" rel="stylesheet">

    <link href="/css/owl.carousel.min.css" rel="stylesheet">
    <link href="/css/owl.theme.default.min.css" rel="stylesheet">
    <link href="/css/magnific-popup.css" rel="stylesheet">

    <link href="/css/aos.css" rel="stylesheet">

    <link href="/css/ionicons.min.css" rel="stylesheet">

    <link href="/css/bootstrap-datepicker.css" rel="stylesheet">
    <link href="/css/jquery.timepicker.css" rel="stylesheet">


    <link href="/css/flaticon.css" rel="stylesheet">
    <link href="/css/icomoon.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>

<div th:insert="fragments/navbar.html"/>
<!-- END nav -->
<div class="hero-wrap" style="background-image: url('../images/bg_3.jpg');">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text d-flex align-itemd-center justify-content-center">
            <div class="col-md-9 ftco-animate text-center d-flex align-items-end justify-content-center">
                <div class="text">
                    <h1 class="mb-4 bread">Радиус концерт Истории</h1>
                </div>
            </div>
        </div>
    </div>
</div>

<section class="ftco-section">
    <div class="container">
        <div class="row d-flex" id="blogs">

        </div>
        <div class="row mt-5">
            <div class="col text-center">
                <div class="col text-center">
                    <p class="pt-1">
                        <a class="btn-custom px-3 py-2 rounded"
                           onclick="fillBlogs(lastLoaded+1, lastLoaded+51)">Загрузить еще
                            <span class="icon-long-arrow-down"></span></a></p>
                </div>
            </div>
        </div>
    </div>
</section>

<div th:insert="fragments/footer.html"/>


<!-- loader -->
<div th:insert="fragments/loader.html"/>


<script src="/js/jquery.min.js"></script>
<script src="/js/jquery-migrate-3.0.1.min.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.easing.1.3.js"></script>
<script src="/js/jquery.waypoints.min.js"></script>
<script src="/js/jquery.stellar.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/aos.js"></script>
<script src="/js/jquery.animateNumber.min.js"></script>
<script src="/js/bootstrap-datepicker.js"></script>
<script src="/js/scrollax.min.js"></script>
<script src="/js/main.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>

<script>
  const blogsTemplate = '{{#.}}<div class="col-md-4 d-flex ftco-animate">'+
    '     <div class="blog-entry align-self-stretch">'+
    '         <a class="block-20 rounded" href="blog-single.html"'+
    '            style="background-image: url(\'{{mainImege}}\');">'+
    '         </a>'+
    '         <div class="text mt-3">'+
    '             <div class="meta mb-2">'+
    '                 <div><a href="#">{{LocalDateTime}}</a></div>'+
    '                 <div><a href="#">{{author.login}}</a></div>'+
    '                 <div><a class="meta-chat" href="#"><span class="icon-chat"></span> 3</a></div>'+
    '             </div>'+
    '             <h3 class="heading"><a href="/blog/{{id}}">{{title}}</a></h3>'+
    '             <p>{{preview}}</p>'+
    '             <a class="btn btn-secondary rounded" href="/blog/{{id}}">Полностью</a>'+
    '         </div>'+
    '     </div>'+
    '</div>{{/.}}';

    let blog_stored = null;
    $.get('/api/blogs')
      .then(data => {
          console.log(data);
          if (data.length > 0) {
              blog_stored = data;
              fillBlogs(0, 50);
          }
      });

    function fillBlogs(from, to) {
        if (to > blog_stored.length) {
            to = blog_stored.length;
        }
        if (from >= to) {
            return
        }
        lastLoaded = to;
        let events = blog_stored.slice(from, to);

        let eventsRender = Mustache.render(blogsTemplate, events);
        $('#blogs').append(eventsRender);
        contentWayPoint();
    }


</script>
</body>
</html>